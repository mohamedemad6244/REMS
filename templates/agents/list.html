{% extends 'base.html' %}

{% block content %}
<section class="sc1">
    <div class="contenttt">
        <div class="contentt">
            <header class="dashBb">
                <h2>Agents</h2>
            </header>
            <div class="">
                <a class="propmngg" href="{{ url_for('add_agent') }}"><p>Add New Agents</p></a>
            </div>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Hire Date</th>
                    <th>License Number</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for agent in agents %}
                <tr>
                    <td>{{ agent.Agent_ID }}</td>
                    <td>{{ agent.F_Name }}</td>
                    <td>{{ agent.L_Name }}</td>
                    <td>{{ agent.Email_Address }}</td>
                    <td>{{ agent.Phone_No }}</td>
                    <td>{{ agent.Date_Hired }}</td>
                    <td>{{ agent.License_Number }}</td>
                    <td>
                        <button>
                            <a href="{{ url_for('update_agent', agent_id=agent.Agent_ID) }}" class="button">Edit</a>
                        </button>
                        <div class="cs">
                            <form id="fff" method="POST" action="{{ url_for('delete_agent', agent_id=agent.Agent_ID) }}" style="display:inline;" onsubmit="return confirmDelete('{{ agent.Agent_ID }}', '{{ agent.F_Name }}', '{{ agent.L_Name }}', '{{ agent.License_Number }}');">
                                <button type="submit"><a class="button" href="#" style{color:"#fff"}><Delete/a></button>
                            </form>
                        </div>
                    </td>

                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>
<script>
function confirmDelete(agentId, firstName, lastName, licenseNumber) {
    return confirm(`Are you sure you want to delete the agent with ID: ${agentId}\nName: ${firstName} ${lastName}\nLicense Number: ${licenseNumber}?`);
}
</script>
{% endblock %}
